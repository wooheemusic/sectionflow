/*!
* SectionFlow v1.0.0
* Copyright (c) 2016-2017 Woo Hee, Chung. (wooheemusic@gmail.com)
*/

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(d,m,l){if(null==d)throw new TypeError("The 'this' value for String.prototype."+l+" must not be null or undefined");if(m instanceof RegExp)throw new TypeError("First argument to String.prototype."+l+" must not be a regular expression");return d+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,m,l){d!=Array.prototype&&d!=Object.prototype&&(d[m]=l.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,m,l,h){if(m){l=$jscomp.global;d=d.split(".");for(h=0;h<d.length-1;h++){var f=d[h];f in l||(l[f]={});l=l[f]}d=d[d.length-1];h=l[d];m=m(h);m!=h&&null!=m&&$jscomp.defineProperty(l,d,{configurable:!0,writable:!0,value:m})}};
$jscomp.polyfill("String.prototype.startsWith",function(d){return d?d:function(d,l){var h=$jscomp.checkStringArgs(this,d,"startsWith");d+="";var f=h.length,a=d.length;l=Math.max(0,Math.min(l|0,h.length));for(var b=0;b<a&&l<f;)if(h[l++]!=d[b++])return!1;return b>=a}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var d=0;return function(m){return $jscomp.SYMBOL_PREFIX+(m||"")+d++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(d){var m=0;return $jscomp.iteratorPrototype(function(){return m<d.length?{done:!1,value:d[m++]}:{done:!0}})};$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};
$jscomp.iteratorFromArray=function(d,m){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var l=0,h={next:function(){if(l<d.length){var f=l++;return{value:m(f,d[f]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6","es3");
$jscomp.polyfill("Array.prototype.entries",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d,l){return[d,l]})}},"es6","es3");
function AccountManager(d,m,l,h){function f(f){HOMapper.compare(f,q)||(isLogEnabled&&console.log("AccountManager '"+b+"' has saved the account.",f),q=f,null===f?0!==e&&window.clearInterval(e):void 0!==c&&void 0!==k&&(e=window.setInterval(a.checkServerAccount.bind(a),6E4*k)),a.publishEvent("propagateAccount",f))}var a=this;this.annotations={$BuildAtLast:"checkServerAccount"};var b=d||"accountManager",p=m,c=l,k=1<=h?h:void 0,e=0,q=void 0;this.getName=function(){return b};this.setAccountConstructor=
function(a){p=a};this.setAccoutUri=function(a){c=a};this.setCheckInterval=function(a){k=a};this.setAccount=function(a){if(a){a=HOMapper.merge(a,p);var b=!0,c;for(c in a)if(void 0===a[c]){b=!1;isLogEnabled&&console.log("All values in the account are required.");break}!0===b?f(a):f(null)}else f(null)};this.getAccount=function(){return q};this.discardAccount=function(){q=null};this.checkServerAccount=function(){isLogEnabled&&console.log("AccountManager is checking the account session from the server.");
var a=new XMLHttpRequest;a.bean=this;a.onreadystatechange=function(){if(4==a.readyState)switch(this.status){case 200:try{var b=JSON.parse(this.response);isLogEnabled&&console.log("AccountManager has received a 200 response with an account",b);this.bean.setAccount(b)}catch(w){console.log("AccountManager has received a 200 response with an invalid data ",this.response),this.bean.setAccount(null)}break;case 404:isLogEnabled&&console.log("AccountManager has received a 404 response with no account.");
this.bean.setAccount(null);break;default:isLogEnabled&&console.log("AccountManager has received a unimplemented response.",this.status,this);try{console.log("BODY : ",JSON.parse(this.response))}catch(w){console.log(w)}this.bean.setAccount(null)}};a.open("GET",c,!0);a.send()}};function AjaxDelete(d){function m(b){b=b.currentTarget;var c=b.dataset.mapping;if(void 0===c)throw Error("no mapping found");c=HOMapper.getUriFromLocation(location,c,!0,"location");var e=b.dataset.callback;e in p?l(b,c,a,0,e):l(b,c,a)}function l(c,k,e,d,m){var q=0<Number(d)?d:0;3===q?e===a&&b===location.pathname+location.search&&alert("server busy"):(d=new XMLHttpRequest,d.bean=h,d.target=c,d.onreadystatechange=function(){if(4===this.readyState)switch(this.status){case 204:isLogEnabled&&console.log("AjaxDelete has received a 204 response from",
this.requestUri);break;case 404:isLogEnabled&&console.log("AjaxDelete has received a 404 response from",this.requestUri);break;case 408:isLogEnabled&&console.log("AjaxDelete has received a 408 response from",this.requestUri);e===a&&b===location.pathname+location.search&&(isLogEnabled&&console.log("AjaxDelete is retrying a request to",this.requestUri),l(this.target,q+1,this.requestUri));break;case 0:console.log("0 response from",this.requestUri,this);break;default:WhUtils.showXhttpMessage(this)}void 0!==
m&&p[m].bind(this)()},isLogEnabled&&console.log("AjaxDelete '"+f+"' is requesting DELETE to",k,"for the scope",c),d.requestUri=k,d.open("DELETE",k,!0),d.send())}var h=this;this.annotations={$Render:"init"};var f=d||"ajaxGet",a=0,b="",p={};this.getName=function(){return f};this.appendReadyStateChangeFunction=function(a,b){p[a]=b};this.init=function(c){a=Date.now();b=location.pathname+location.search;c=c.getElementsByClassName(f);for(var d=c.length,e=0;e<d;e++){var p=c[e];void 0===p.dataset.deleteEvent&&
(p.dataset.deleteEvent="true",p.addEventListener("click",m))}}};function AjaxGet(d){function m(f){return f===a&&b===location.pathname+location.search}function l(a,b,d,e){var c=0<Number(e)?e:0;3===c?(this.target.style.cursor="auto",m(d)&&alert("server busy")):(a.style.cursor="progress",e=new XMLHttpRequest,e.bean=h,e.target=a,e.onreadystatechange=function(){if(4===this.readyState)switch(this.status){case 200:try{var e=JSON.parse(this.response);isLogEnabled&&console.log("AjaxGet has received a 200 response with an entity",e,"from",this.requestUri);m(d)&&(WhUtils.putValuesToHistory(b,
e),HOMapper.writeEntityByView(a,e),a.style.opacity=1,h.publishEvent("render"))}catch(A){console.log("AjaxGet has received a 200 response with an invalid data from",this.requestUri,this.response,A)}this.target.style.cursor="auto";break;case 404:isLogEnabled&&console.log("AjaxGet has received a 404 response from",this.requestUri);this.target.style.cursor="auto";break;case 408:isLogEnabled&&console.log("AjaxGet has received a 408 response from",this.requestUri);m(d)?(isLogEnabled&&console.log("AjaxGet is retrying a request to",
this.requestUri),l(this.target,c+1,this.requestUri)):this.target.style.cursor="auto";break;case 0:console.log("0 response from",this.requestUri,this);this.target.style.cursor="auto";break;default:WhUtils.showXhttpMessage(this),this.target.style.cursor="auto"}},isLogEnabled&&console.log("The AjaxGet '"+f+"' is requesting GET to",b,"for the scope",a),e.requestUri=b,e.open("GET",b,!0),e.send())}var h=this;this.annotations={$Init:"init"};var f=d||"ajaxGet",a=0,b="";this.getName=function(){return f};this.init=
function(d){a=Date.now();b=location.pathname+location.search;d=d.getElementsByClassName(f);for(var c=d.length,k=0;k<c;k++)d[k].style.opacity=0;for(k=0;k<c;k++){var e=d[k],p=e.dataset.mapping;if(void 0===p)throw Error("no mapping found");var m=HOMapper.getUriFromLocation(location,p,!0,"location");p=WhUtils.getValueFromHistory(m);void 0===p?l(e,m,a):(HOMapper.writeEntityByView(e,p),e.style.opacity=1,h.publishEvent("render"))}}};function BasicForm(d,m,l,h,f,a){function b(){t?"function"===typeof w.close&&w.close():e.retry()}function p(a){if("object"===typeof a)isLogEnabled&&console.log("The basic form '"+q+"' is opened with an entity,",a),HOMapper.writeEntity(u,a,A);else{if(z)a:{a=z;for(var b=WhUtils.correctUri(location.pathname).split("/"),r=0;r<a.length;r++){var c=a[r];if(-1!==b.indexOf(c.value)&&!1===c.disabled){c.selected=!0;break a}}}g.focus()}}function c(){HOMapper.deleteResultsByBase(u,A);HOMapper.clearClones(u);r?
r.reset():WhUtils.reset(u);x=!1;e.publishEvent("unblock")}function k(a){a.preventDefault();if(!1===x){x=!0;if(a=v)a=e.getAccount(),a=!(null===a||"guest"===a.auth.toLowerCase());if(a)alert("please log in first"),x=!1;else if(WhUtils.checkValidity(u)){e.publishEvent("block");a=new XMLHttpRequest;a.bean=e;a.onreadystatechange=F;var b=HOMapper.readEntity(A,u),g=HOMapper.getValue(b,I,A);b=HOMapper.buildUri(H,G,b,A);a.open(H,b,!0);isLogEnabled&&console.log("sending data",H,b,g);"object"===typeof g&&(a.setRequestHeader("Content-Type",
"application/json;charset=UTF-8"),g=JSON.stringify(g));a.send(g)}else x=!1}}if("string"!==typeof d)throw Error("A non-empty string value of ID is required for BasicForm.");var e=this;this.annotations={$CloseByFlow:function(a){t||C||a&&!a.contains(u)||c()},$Init:function(a){t||C||a&&!a.contains(u)||p()},$Bound:function(a){w=a;t=!0},$GetAccount:"getAccount",$SetAccount:"setAccount"};var q=d,u,A=m,w=null,t=!1,y=!1,C=!1,x=!1,v=!1===a?!1:!0,g,n="submit",r,z,H=l?l.toUpperCase():"POST",G=h,I=f?f:A,F=function(){console.log("no ready state change function.")};
this.getName=function(){return q};this.setAccount=this.getAccount=void 0;this.setRetaining=function(a){C=a};this.getTargetElement=function(){return u};this.open=function(a){y||!t||C||(y=!0,p(a))};this.close=function(){y&&t&&!C&&(y=!1,c())};this.load=function(a){t&&!y?"function"===typeof w.open&&w.open(a):(c(),p(a))};this.cancel=b;this.retry=function(){c();p()};this.setCallBackFunction=function(a){F=a};WhUtils.defer(function(){if(!window[q])throw Error("An ID of '"+q+"' is not found.");if(window[q]instanceof
HTMLCollection)throw Error("The BasicForm of '"+q+"' is duplacated by ID.");u=window[q];u.dataset.beanName=q;g=u.querySelector("input[type=email]")||u.querySelector("[contentEditable=true]")||u.querySelector("input[type=text]");if(!g)throw Error("The BasicForm of '"+q+"' is not eligible for an BasicForm.");var a=u.querySelector(".cancel");if(!a)throw Error("The BasicForm of '"+q+"' requires an element with a class name 'cancel'.");a.addEventListener("click",b);n="submit";a=u.getElementsByClassName(n);
var c=a.length;if(0===c)throw Error("The BasicForm of '"+q+"' requires one or more elements with a class name '"+n+"'.");for(var e=0;e<c;e++){var d=a[e];"INPUT"!==d.tagName||"text"!==d.type&&"password"!==d.type?a[e].addEventListener("click",k):a[e].addEventListener("keyup",function(a){13===a.keyCode&&k(a)})}var f=u.querySelector("input[type='password'].confirm");if(f){var p=u.querySelector("input[type='password']:not(.confirm)");p&&u.addEventListener("keyup",function(){p.value!==f.value?f.setCustomValidity("password not match"):
f.setCustomValidity("")})}r=u.querySelector("form");z=u.querySelector("select")})};function Board(d,m,l,h,f,a,b,p){function c(a){return a===H&&F===location.pathname+location.search+location.hash}function k(a){S.push(a);r.publishEvent("cursor-start","progress");L&&WhUtils.displayBlockAndAddClass(L,"progress-view-visible")}function e(a){a=S.indexOf(a);-1!==a&&(S.splice(a,1),L&&setTimeout(function(){L.classList.remove("progress-view-visible")},700),setTimeout(function(){r.publishEvent("cursor-end","progress")},500))}function q(a,b,g){var n=0<Number(b)?b:0;if(n===ja)e(a),c(a)&&alert("server busy");
else{var z=new XMLHttpRequest;z.bean=r;z.onreadystatechange=function(){if(4===this.readyState)switch(isLogEnabled&&console.log(B,"has received a",this.status,"response from",z.requestUri,"within",Date.now()-z.performanceTestStart,"milliseconds"),this.status){case 200:try{var b={},g=JSON.parse(this.response);b.entity=g;if(g instanceof Array){var r=this.getResponseHeader("X-Page-Size"),d=this.getResponseHeader("X-Page-Total");null!==r&&(b.xPageSize=r);null!==d&&(b.xPageTotal=d);isLogEnabled&&console.log(B,
"has extracted an entity",g,"with X-Page-Size",r,"and X-Page-Total",d,"from the response from",this.requestUri)}else isLogEnabled&&console.log(B,"has extracted an entity",g,"from the response from",this.requestUri);if(c(a)){WhUtils.putValuesToHistory(B,b);var f=700-Date.now()+a;0>=f?u(b,a):(isLogEnabled&&console.log(B,"deliverately waits",f,"milliseconds to render properly."),window.setTimeout(u,f,b,a))}}catch(na){console.log(B,"has failed to extract an entity from the response from",this.requestUri,
this.response,na),c(a)&&this.bean.publishEvent("reload","/not-found")}break;case 404:c(a)&&this.bean.publishEvent("reload","/not-found");break;case 408:isLogEnabled&&console.log(B,"retry a request to",this.requestUri);q(a,n+1,this.requestUri);break;case 0:e(a);c(a)&&alert("no response from server");console.log("0 response from",this.requestUri,this);break;default:e(a),WhUtils.showXhttpMessage(this,c(a))}};b=g||HOMapper.getUriFromLocation(location,M,!0,"location");isLogEnabled&&console.log(B,"requests GET to",
b);z.requestUri=b;z.open("GET",b,!0);z.performanceTestStart=Date.now();z.send()}}function u(a,b){if(void 0===b||c(b)){I=a.entity;var g=new HOMapper.LocationParser(location,!0);if(I instanceof Array)if(0===I.length)G=Q;else{G=K;var n=(new RegExp(W+"=\\d+")).exec(location.search);n=null!==n?Number(n[0].slice(n[0].indexOf("=")+1)):0;0===n&&0!==X&&I.length>X?HOMapper.writeEntity(G,I.slice(0,X),ba):HOMapper.writeEntity(G,I,ba);HOMapper.writeEntity(G,g,"location");window.setTimeout(A,500,n,a.xPageSize,
a.xPageTotal)}else G=E,HOMapper.writeEntity(G,I,U),HOMapper.writeEntity(G,g,"location");switch(G){case K:isLogEnabled&&console.log(B,"is displaying a list view.");Q.classList.remove("empty-list-view-visible");E.classList.remove("single-view-visible");WhUtils.displayBlockAndAddClass(K,"list-view-visible");break;case E:isLogEnabled&&console.log(B,"is displaying a single view.");Q.classList.remove("empty-list-view-visible");K.classList.remove("list-view-visible");t(E);E.style.minHeight=window.innerHeight-
100+"px";WhUtils.displayBlockAndAddClass(E,"single-view-visible");break;case Q:isLogEnabled&&console.log(B,"is displaying a empty view."),E.classList.remove("single-view-visible"),K.classList.remove("list-view-visible"),WhUtils.displayBlockAndAddClass(Q,"empty-list-view-visible")}ha=!0;r.publishEvent("render",G);e(b)}}function A(a,b,g){function r(a,b,g,r,c,n){b?"A"===a.tagName?a.href=g.replace(r,c+"="+n):(a.classList.add("spa-link"),a.dataset.href=g.replace(r,c+"="+n)):"A"===a.tagName?a.removeAttribute("href"):
a.dataset.href=void 0}a=a||X||b||0;if(!a)throw Error(B,"should have non-zero default page size or the response should have the header 'X-Page-Size'.");g=g||0;g=0!==g?Math.ceil(g/a):Number.MAX_VALUE;a=location.pathname+location.search+location.hash;var c=(new RegExp(R+"=\\d+")).exec(a);null!==c?(b=Number(c[0].slice(c[0].indexOf("=")+1)),c=c[0]):(b=1,c=R+"="+b,a=a+(/\?/.test(a)?"&":"?")+c);void 0!==ca&&r(ca,0<b-1,a,c,R,b-1);void 0!==N&&r(N,b+1<=g,a,c,R,b+1);for(var n=1+Math.max(b-O,0),z=0;z<Y;z++){var e=
z+n;J[z].innerHTML=e;e===b?(J[z].classList.add("current-page"),r(J[z],!1)):(J[z].classList.remove("current-page"),r(J[z],e<=g,a,c,R,e))}w();window.setTimeout(w,1E3)}function w(){if(void 0!==T)if(0<Number(window.getComputedStyle(Z).opacity)){for(var a=window.innerHeight+window.pageYOffset,b=0,g=Z;null!==g&&"BODY"!==g.tagName;)b+=g.clientTop+g.offsetTop,g=g.offsetParent;a-=b;T.style.bottom=0<a?a+"px":0}else T.style.bottom=0}function t(a){if(null!==I){var b=!1;null!==z&&(b=HOMapper.getValue(I,fa,U),
b=HOMapper.compare(b,z));for(var g=!0===b?"block":"none",r=a.getElementsByClassName("self-only"),c=r.length,n=0;n<c;n++){a=r[n];var e=a.dataset.display;a.style.display=void 0!==e&&b?e:g}}}function y(){r.publishEvent("reload")}function C(){history.back()}function x(a,b,g){var n=0<Number(b)?b:0;n===ja?(e(a),c(a)&&alert("server busy"),console.log("server busy for",g)):(b=new XMLHttpRequest,b.bean=r,b.onreadystatechange=function(){if(4===this.readyState)switch(this.status){case 204:if(c(a)){var b=WhUtils.getValueFromHistory("caller");
void 0!==b?(history.replaceState(null,null,location.href),isLogEnabled&&console.log("The article is modified and the container forwards to",b),r.publishEvent("load",b)):aa?(history.replaceState(null,null,location.href),b=HOMapper.getUriFromLocation(location,aa,!0,"location"),this.bean.publishEvent("load",b)):(isLogEnabled&&console.log("Reloading the page"),r.publishEvent("reload"))}break;case 404:isLogEnabled&&console.log(B,"has received a 404 response for delete request to",this.requestUri);c(a)&&
this.bean.publishEvent("load","/not-found");break;case 408:isLogEnabled&&console.log(B,"has received a 408 response. Trying request again.");q(a,n+1,this.requestUri);break;case 0:e(a);c(a)&&alert("no response from server");console.log("no response from server for",this.requestUri);break;default:e(a),WhUtils.showXhttpMessage(this,c(a))}},g=g||HOMapper.getUriFromLocation(location,M,!0,"location"),b.requestUri=g,b.open("DELETE",g,!0),isLogEnabled&&console.log("The board '"+B+"' is requesting DELETE to",
g),b.send())}function v(a){WhUtils.deleteValueFromHistory(B);k(H);x(H)}function g(){P.load(HOMapper.readEntity("article",D))}function n(){D.style.minHeight=window.innerHeight-100+"px"}var r=this;this.annotations={$CloseByFlow:function(a){if(a===D||a.contains(D))for(var b in S)e(S[b])},$AccountEventListerner:function(a){z=a;t(G)},$Init:function(a){if(a===D||a.contains(D)){ha=!1;H=Date.now();F=location.pathname+location.search+location.hash;G=I=null;a=H;var b=WhUtils.getValueFromHistory(B);isLogEnabled&&
(b?console.log("The board '"+B+"' has retrieved the data from History.",b):console.log("The board '"+B+"' has failed to retrieve data from History."));void 0===b?(k(a),q(a)):u(b)}},$Render:function(a){setTimeout(function(){if(!0===ha&&(a===D||a.contains(D)||D.contains(a))&&(ha=!1,void 0===WhUtils.getValueFromHistory("pageYOffset"))){var b=WhUtils.getDocumentHeight();if(V){var g=0;for(var r=V;null!==r&&"BODY"!==r.tagName;)g+=r.clientTop+r.offsetTop,r=r.offsetParent}else g=void 0;b-g>=window.innerHeight&&
window.scrollTo(0,g)}},200)}};var z=null,H=0,G=null,I=null,F=void 0,S=[],B=d,U=m,ba=l,D,V,P,M=h,da=f,aa=a,fa=b,E,K,Q,L,R="page",X=0,W="size",Z,T,ca,N,J,Y,O,ja=3,ha=!1,oa=B+"-modify",ea,pa=B+"-delete",la,qa=B+"-refresh",ia,ra=B+"-back",ma;this.getName=function(){return D||"board"};this.setEditor=function(a){P=a};this.setArticleUriMapping=function(a){M=a};this.setCountMapping=function(a){da=a};this.setLocationMapping=function(a){aa=a};this.setAccountPropertySequence=function(a){fa=a};this.setSearchPageIdentifier=
function(a){R=a};this.setNumOfTrials=function(a){ja=0<Number(a)?a:1};this.setDefaultPageSize=function(a){X=a};this.setSearchSizeIdentifier=function(a){W=a};window.addEventListener("resize",n);window.addEventListener("resize",w);window.addEventListener("scroll",w);WhUtils.defer(function(){if(!window[B])throw Error("An ID of '"+B+"' is not found.");if(window[B]instanceof HTMLCollection)throw Error("The Board of '"+B+"' is duplacated by ID.");D=window[B];D.dataset.beanName=B;n();for(var a=D;null!==a;){if("SECTION"===
a.tagName||a.classList.contains("section")){V=a;break}a=a.parentElement}if(void 0===M)throw Error("The Board of '"+B+"' requires a location mapping.");if(void 0===da&&isLogEnabled)throw Error("The Board of '"+B+"' requires a count mapping.");E=D.getElementsByClassName("single-view")[0];K=D.getElementsByClassName("list-view")[0];Q=D.getElementsByClassName("empty-list-view")[0];if(void 0===E||void 0===K)throw Error("The Board of '"+B+"' requires views with class names of 'single-view', 'list-view' and 'empty-list-view'");
WhUtils.opacityZeroToDisplayNone(E,"single-view-visible");WhUtils.opacityZeroToDisplayNone(K,"list-view-visible");WhUtils.opacityZeroToDisplayNone(K,"empty-list-view-visible");L=D.getElementsByClassName("progress-view")[0];void 0!==L&&(L.style.position="absolute",L.style.zIndex=2,WhUtils.opacityZeroToDisplayNone(L,"progress-view-visible"));Z=document.getElementById("bottomFooter");T=D.getElementsByClassName("search-container")[0];ca=D.getElementsByClassName("search-before")[0];N=D.getElementsByClassName("search-next")[0];
J=D.getElementsByClassName("search-page");Y=J.length;O=Math.ceil(Y/2);P&&(ea=D.getElementsByClassName(oa)[0])&&ea.addEventListener("click",g);(la=D.getElementsByClassName(pa)[0])&&la.addEventListener("click",v);(ia=D.getElementsByClassName(qa)[0])&&ia.addEventListener("click",y);(ma=D.getElementsByClassName(ra)[0])&&ma.addEventListener("click",C)})};function ClassBasedAccountEventListerner(d){function m(a,d){var b=a.getElementsByClassName("account-info"),f=a.getElementsByClassName("member-only"),e=a.getElementsByClassName("guest-only");a=a.getElementsByClassName("admin-only");null===d||"GUEST"===d.auth.toUpperCase()?(l(e,"on"),l(f,"off"),l(a,"off")):"MEMBER"===d.auth.toUpperCase()?(l(e,"off"),l(f,"on"),l(a,"off")):"ADMIN"===d.auth.toUpperCase()&&(l(e,"off"),l(f,"on"),l(a,"on"));f=b.length;for(e=0;e<f;e++)HOMapper.writeEntity(b[e],d,h)}function l(a,
d){for(var b=a.length,f=0;f<b;f++){var e=a[f];if("on"===d)switch(e.tagName){case "INPUT":case "TEXTAREA":case "OPTION":case "SELECT":e.disabled=!1;break;case "DIV":if("inherit"!==e.contentEditable){e.contentEditable="true";break}default:e.style.display=e.dataset.display?e.dataset.display:"block"}else switch(e.tagName){case "INPUT":case "TEXTAREA":case "OPTION":case "SELECT":e.disabled=!0;break;case "DIV":if("inherit"!==e.contentEditable){e.contentEditable="false";break}default:e.style.display="none"}}}
this.annotations={$AccountEventListerner:"injectAccountGlobally"};var h=d||"account",f=h+"Listener",a=null;this.getName=function(){return f};this.injectAccountGlobally=function(b){isLogEnabled&&console.log("global injection with the given account",b);a=b;m(document,b)};this.applyAccount=function(b){isLogEnabled&&console.log("ClassBasedAccountEventListerner is refreshing the DOM, ",b,a);m(b,a)}};function Dialog(d,m,l){function h(e){e&&e!==f||!q||(q=!1,f.classList.remove(a),c.classList.remove(b),k&&"close"in k&&"function"===typeof k.close&&k.close.apply(k,arguments),this.publishEvent("dialog-back",this))}if(!d&&"string"!==typeof d)throw Error("A non-empty string value of ID is required for Dialog.");this.annotations={$Closeable:h,$BuildAtStart:"appendTriggerElements",$Render:"appendTriggerElements"};var f,a=d+"-visible",b=d+"-shadow-visible",p="number"===typeof m?m:24,c,k,e=!0,q=!1;this.getName=
function(){return d};this.getTargetElement=function(){return f};this.setShadowTrigger=function(a){e=a};this.bind=function(a){k=a;if(a.annotations&&"$Bound"in a.annotations){var b=a.annotations.$Bound;if("function"===typeof b)b.bind(a)(this);else if("string"===typeof b&&k[b])k[b](this)}};this.toggle=function(){q?this.close():this.open.apply(this,arguments)};this.close=h;this.open=function(){q||(q=!0,WhUtils.displayBlockAndAddClass(f,a),WhUtils.displayBlockAndAddClass(c,b),k&&"open"in k&&"function"===
typeof k.open&&k.open.apply(k,arguments),this.publishEvent("dialog-open",f,this))};this.setTriggerElement=function(a){void 0===a.dataset.dialogName&&(a.dataset.dialogName=d,a.addEventListener("click",function(){this.toggle()}.bind(this)))};this.appendTriggerElements=function(a){if(a){a=a.getElementsByClassName(d+"-trigger");for(var b=a.length,c=0;c<b;c++)this.setTriggerElement(a[c])}};m={};m.shadowVisible=document.createTextNode("."+d+"-shadow."+b+" {opacity:"+("number"===typeof l?l:.5)+";transition: opacity 225ms cubic-bezier(0.0, 0.0, 0.2, 1);}");
m.shadow=document.createTextNode("."+d+"-shadow {display:none;z-index: "+(p-1)+";position: fixed;margin :0;padding: 0 ;top: 0;opacity:0;left: 0;width: 100%;height: 100%;background-color: black;transition: opacity 195ms cubic-bezier(0.4, 0.0, 1, 1);}");l=document.getElementsByTagName("STYLE")[0];l||(l=document.createElement("STYLE"),document.head.appendChild(l));for(var u in m)l.insertBefore(m[u],l.firstChild);WhUtils.defer(function(){if(!window[d])throw Error("An ID of '"+d+"' is not found.");if(window[d]instanceof
HTMLCollection)throw Error("The dialog of '"+d+"' is duplacated by ID.");f=window[d];f.dataset.beanName=d;WhUtils.opacityZeroToDisplayNone(f,a);c=document.getElementsByClassName(d+"-shadow")[0];if(!c){c=document.createElement("div");c.classList.add(d+"-shadow");e&&c.classList.add(d+"-trigger");var k=document.getElementsByClassName("utilities")[0];k||(k=document.createElement("div"),k.classList.add("utilities"),document.body.appendChild(k));k.appendChild(c)}e&&(c.style.cursor="pointer");WhUtils.opacityZeroToDisplayNone(c,
b)})};Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(d,m){if(null==this)throw new TypeError('"this" is null or not defined');var l=Object(this),h=l.length>>>0;if("function"!==typeof d)throw new TypeError("predicate must be a function");for(var f=0;f<h;){if(d.call(m,l[f],f,l))return f;f++}return-1}});String.prototype.startsWith||(String.prototype.startsWith=function(d,m){return this.substr(m||0,d.length)===d});function HtmlObjectMapperUtils(){function d(a,b,r,c){for(var g=r,n=/([^\{\}]+|^)(?=\{(\w|\.|-)+\})/,e=[],z;z=g.match(n);)e.push(z[0]),g=g.slice(g.search("}")+1);e.push(g);a:{g=[];n=e.length;for(z=0;z<n-1;z++){if(c.slice(0,e[z].length)!==e[z]){e=null;break a}c=c.slice(e[z].length);var d=z===n-2&&""===e[z+1]?c.length:c.indexOf(e[z+1]);d=c.slice(0,d);g.push(d);c=c.slice(d.length)}e=c!==e[n-1]?null:g}if(null===e)return!1;c=r.match(/\{(\w|\.|-)+\}/g);if(r=r.match(u(b)))for(g=c.length,n=0;n<g;n++)c[n]===
r[0]&&(z=w(r.shift()),m(a,z,b,e[n]));return!0}function m(a,b,r,c){if(void 0!==c){if(!b.startsWith(r))throw Error("The property sequence should start with the base.");b=b.split(".");var g=r.split(".").length;if(1>b.length-g)throw Error("The property sequence does not have any property identifier.");for(r=b.length;g<r;g++){var n=b[g],e=b[g+1];if(void 0===e)a[n]=c;else{if(void 0===a[n])if(0<Number(e)||"0"===e)a[n]=[];else if(1>=e.length)break;else a[n]={};a=a[n]}}}}function l(a){switch(a.tagName){case "INPUT":switch(a.type){case "checkbox":case "radio":if(a.checked)return a.value;
return;default:return a.value}case "OPTION":if(a.selected)return a.value;break;case "SELECT":if("select-multiple"===a.type)throw Error("multiple disallowed. not implemented.");return a.value;case "TEXTAREA":return a.value;default:return a.innerHTML}}function h(a){for(var b=0;a.parentElement.querySelector("[data-cloned-index='"+b+"']");)b++;return b}function f(b,c){var g=b.dataset.collection;if(void 0===g||b.classList.contains("cloned"))throw Error("cannot construct a clone for the element.");if(0<
Number(c)||"0"===c||0===c)if(b.parentElement.querySelector("[data-collection='"+g+"'][data-cloned-index='"+c+"']"))console.log("The cloned index '"+c+"' already exists.");else return a(b,g,c);else console.log("invalid index",c)}function a(a,c,r){var g=a.cloneNode(!0);g.classList.add("cloned");g.dataset.clonedIndex=r;g.innerHTML=b(g.innerHTML,c,g.dataset.indexVariable||"i",r);a.parentElement.insertBefore(g,a);return g}function b(a,b,r,c){return a.replace(new RegExp(b+"\\."+r+"(?=(\\.|\\s|\"|'|$))",
"g"),b+"."+c).replace(new RegExp("\\{"+r+"\\}","g"),c)}function p(a,b,r){a=a.querySelectorAll("[data-property]");for(var g=a.length,n=0;n<g;n++){var d=a[n],f=b,k=r,p=d.dataset.property;if(p){p=p.split(";");for(var v=[],l=0;l<p.length;l++){var h=p[l];if(h.startsWith(k))h=A(f,h,k),void 0!==h&&e(d,h);else if(h.startsWith("#")){var m=h.split("#");h=m[1];-1===v.indexOf(h)&&(m=m[2],m="data-href"===h||"href"===h?q(m,f,k,c):q(m,f,k),-1!==m.search("undefined")||/\{(\w|\.|-)+\}/.test(m)?(new RegExp("\\{"+k)).test(m)&&
d.removeAttribute(h):("html"===h?e(d,m):d.setAttribute(h,m),v.push(h)))}}}}}function c(a){return String(a).replace(/\s/g,"-").replace(/[%^`\\|"\[\]\{\}<>\/\?\=&]/g,"").replace(/-+/g,"-")}function k(a,b){var g=a.dataset.property;if(!g)return!1;g=g.split(";");for(var c=0;c<g.length;c++){var n=g[c];if(n.startsWith(b))return e(a,""),!0;if(n.startsWith("#")){n=n.split("#");var d=n[1];if((new RegExp("\\{"+b.replace(".","\\."))).test(n[2]))return"html"===d?e(a,""):a.removeAttribute(d),!0}}return!1}function e(a,
b){void 0===b&&(b="");switch(a.tagName){case "INPUT":switch(a.type){case "checkbox":case "radio":a.checked=a.value===b?!0:!1;break;default:a.value=b}case "OPTION":a.selected=a.value===b?!0:!1;break;case "SELECT":if("select-multiple"===a.type)throw Error("select-multiple disallowed. not implemented");a.value=b;break;case "TEXTAREA":a.value=b;break;default:a.innerHTML=b}}function q(a,b,c,e){return a.replace(u(c),function(a){return"function"===typeof e?e(A(b,w(a),c)):A(b,w(a),c)})}function u(a){return new RegExp("\\{"+
a+"\\.(\\w|\\.|-)+\\}","g")}function A(a,b,c){if(a){if(!b.startsWith(c+".")&&b!==c)throw Error("The property sequence should start with the base.");var g=b.split("."),r=c.split(".").length,e=g.length;if(1>e-r)return isLogEnabled&&console.log("The property sequence does not have any property identifier.",c,b),a;for(;r<e&&(a=a[g[r]],void 0!==a);r++);return a}}function w(a){return a.replace(/(^\{|\}$)/g,"")}function t(a){if(a instanceof Array){var b=[],c;for(c in a)(0<Number(c)||"0"===c)&&void 0!==a[c]&&
b.push(a[c]);return b}for(c in a)"object"===typeof a[c]&&(a[c]=t(a[c]));return a}function y(a,b){if(null===b&&null===a)return!0;if(null===b||"object"!==typeof b||null===a||"object"!==typeof a)return!1;for(var c in b){var g=b[c];if("object"===typeof g){if(!1===y(a[c],g))return!1}else if(g!==a[c])return!1}return!0}function C(a,b){var c=a.pathname.slice(1).split("/"),g=[],e;for(e in c)g[e]=c[e];this.pathname=g;if(!0===b){a=a.search.slice(1).split("&");b={};for(e in a)g=a[e].split("="),c=g[0],g=g[1],
c in b?(b[c]instanceof Array||(g=b[c],b[c]=[]),b[c].push(g)):b[c]=g;this.search=b}}function x(a){return a.replace(/\/undefined/g,"").replace(/&(\w|-)*=undefined/g,"").replace(/\?(\w|-)*=undefined/,"?").replace(/(\?&)/,"?").replace(/\?$/g,"")}var v={};this.readEntity=function(a,b){var c={};b=b.querySelectorAll("[data-property]");for(var g=b.length,e=0;e<g;e++){var f=void 0,n=c,k=a,p=b[e],v=p.dataset.property.split(";");for(f in v){var h=v[f];if(h.startsWith(k)){var q=l(p);m(n,h,k,q)}else h.startsWith("#")&&
(h=h.split("#"),q=h[1],q="html"===q?p.innerHTML:p.getAttribute(q),h=h[2],q&&d(n,k,h,q))}}return c};this.updateEntityByExtraction=function(a,c,e,f,k,p){void 0!==k&&void 0!==p&&(e=b(e,k,"[a-z]",p));f=f.replace(/\/\//,"");f=f.slice(f.search(/\//));return d(a,c,e,f)};this.appendFileElement=function(a,b){if(void 0===a.dataset.collection||a.classList.contains("cloned"))throw Error("cannot construct a clone for the element.");(a=f(a,h(a)))&&p(a,b,"file");return a};this.writeEntityByView=function(a,b){var c=
a.dataset.view,g=a.dataset.base||c;if(void 0!==c){var e=c+"-view";if(c in v)var d=v[c];else{d=document.querySelector("."+e+":not(.cloned)");if(null===d)throw Error("cannot find a view template with a class",e);v[c]=d}c=d.cloneNode(!0);c.classList.add("cloned");HOMapper.writeEntity(c,b,g);WhUtils.removeChildNodes(a);a.appendChild(c)}else void 0!==g&&(HOMapper.deleteResultsByBase(a,g),HOMapper.writeEntity(a,b,g))};this.writeEntity=function(b,c,e){for(var g=b.querySelectorAll("[data-collection^='"+e+
"']:not(.cloned)"),r=g.length,d=0;d<r;d++){var f=void 0,n=g[d],k=c,v=e,h=n.dataset.collection;if(void 0===h||n.classList.contains("cloned"))throw Error("cannot construct clones for the element.");k=A(k,h,v);v=n.parentElement;for(var l=v.querySelectorAll(".cloned[data-collection='"+n.dataset.collection+"']"),m=l.length,q=0;q<m;q++)v.removeChild(l[q]);if(k instanceof Array)for(f in v=[],k)(0<Number(f)||"0"===f)&&v.push(a(n,h,f))}p(b,c,e)};this.applyEntity=p;this.addClone=f;this.deleteClone=function(a,
b){var c=a.parentElement;(a=c.querySelector("[data-collection='"+a.dataset.collection+"'][data-cloned-index='"+b+"']"))&&c.removeChild(a)};this.deleteResultsByBase=function(a,b){a=a.querySelectorAll("[data-property]");for(var c=a.length,e=0;e<c;e++)k(a[e],b)};this.getMappingResult=q;this.getValue=A;this.setValue=m;this.getNormalizedNew=t;this.appendChildEntity=function(a,b,c){if(void 0===a.dataset.collection||a.classList.contains("cloned"))throw Error("cannot construct a clone for the element.");
void 0===c&&(c=h(a));var e=f(a,c);e&&p(e,b,a.dataset.property+"."+c);return e};this.clearClones=function(a){for(a=a.getElementsByClassName("cloned");0!==a.length;)a[0].parentElement.removeChild(a[0])};this.merge=function(a,b){b=new b;for(var c in b)void 0!==a[c]&&(b[c]=a[c]);return b};this.compare=y;this.getUriFromLocation=function(a,b,c,e){return x(q(b,new C(a,c),e?e:"location"))};this.getUriFromLocationObject=function(a,b,c){return x(q(a,b,c?c:"location"))};this.LocationParser=C;this.buildUri=function(a,
b,e,d){"POST"===a.toUpperCase()&&(b=b.replace(/\/\{(\w|\.|-)+\}\/?$/,""));return q(b,e,d,c)}};function ImageManager(d,m,l,h,f){function a(){if(location.hash===k){var a=WhUtils.getValueFromHistory(c);if(void 0!==a.eTag){var e=document.getElementsByClassName(a.eTag)[0];if(void 0!==e){b(e);return}if(void 0!==a.src&&""!==a.src&&(e=document.querySelector("IMG[src='"+a.src+"']"),null!==e)){b(e);return}}}null!==t&&(t.parentElement.removeChild(t),w.classList.remove(A),t=null)}function b(a){t=a.cloneNode(!1);t.classList.add("cloned");t.style.zIndex=e;t.style.opacity=0;t.style.margin=0;t.style.transform=
u;t.style.maxWidth="100%";t.style.maxHeight="100%";t.style.transition=q;t.style.position="fixed";t.addEventListener("click",function(){history.back()});document.body.appendChild(t);WhUtils.displayBlockAndAddClass(w,A);setTimeout(function(){WhUtils.setCenter(t);t.style.opacity="1";t.style.transform="scale(1)"},100)}function p(a){"IMG"===a.tagName&&void 0===a.dataset.imageManagerName&&(a.dataset.imageManagerName=c,a.addEventListener("click",function(a){a=a.currentTarget;var e=c+String(Date.now());a.classList.add(e);
var g={},d={};d.eTag=e;d.src=a.getAttribute("src");g[c]=d;history.pushState(g,null,k);b(a)}))}this.annotations={$Render:function(a){if(a){a=a.getElementsByClassName(c);for(var b=a.length,e=0;e<b;e++)p(a[e])}}};var c="string"===typeof d?d:"image",k="#"+c,e="number"===typeof m?m:24,q="all "+("number"===typeof l?l:500)+"ms cubic-bezier(0.4, 0.0, 0.2, 1)",u="scale("+("number"===typeof h&&0<=h&&1>h?h:.9)+")",A=c+"-shadow-visible",w,t=null;this.getName=function(){return c};d={};d.shadowVisible=document.createTextNode("."+
c+"-shadow."+c+"-shadow-visible {opacity:"+("number"===typeof f?f:.5)+";transition: opacity 225ms cubic-bezier(0.0, 0.0, 0.2, 1);}");d.shadow=document.createTextNode("."+c+"-shadow {display:none;z-index: "+(e-1)+";position: fixed;margin :0;padding: 0 ;top: 0;opacity:0;left: 0;width: 100%;height: 100%;background-color: black;transition: opacity 50ms cubic-bezier(0.4, 0.0, 1, 1);}");f=document.getElementsByTagName("STYLE")[0];f||(f=document.createElement("STYLE"),document.head.appendChild(f));for(var y in d)f.insertBefore(d[y],
f.firstChild);window.addEventListener("popstate",a);window.addEventListener("load",a);WhUtils.defer(function(){w=document.getElementsByClassName(c+"-shadow")[0];w||(w=document.createElement("div"),w.classList.add(c+"-shadow"));var a=document.getElementsByClassName("utilities")[0];a||(a=document.createElement("div"),a.classList.add("utilities"),document.body.appendChild(a));a.appendChild(w);WhUtils.opacityZeroToDisplayNone(w,A)});window.addEventListener("resize",function(){null!==t&&WhUtils.buffer(function(){WhUtils.setCenter(t)},
1E3)})};function LazyUploader(d,m,l,h,f){function a(){t.length===C.length+y+x.length&&(isLogEnabled&&console.log("The delegated files request has been done."),g=window.setInterval(b,10))}function b(){if(null!==v&&(window.clearInterval(g),null!==w)){for(var a in v){var b=v[a];if(!(""===b||void 0===b||null===b||b instanceof Array)){k.popup("uploading the files of "+b);break}}b=!0;if(0!==C.length){b="";for(a in C)b=b.concat(C[a].file.name).concat("\n");b=window.confirm(b.concat("The files above are failed. Do you want to send the article without those files?"))}b?
(isLogEnabled&&console.log("appending new files to the article entity",v),a=HOMapper.getValue(v,u,q),p(a,C),c(a,u,A),HOMapper.setValue(v,u,q,HOMapper.getNormalizedNew(a)),isLogEnabled&&console.log("sending the article to the server.",v),w.send(JSON.stringify(v))):(k.popup(null),window.confirm("Do you want to continue the last article?")&&(isLogEnabled&&console.log("appending new files to the article entity",v),a=HOMapper.getValue(v,u,q),p(a,C),c(a,u,A),HOMapper.setValue(v,u,q,HOMapper.getNormalizedNew(a)),
isLogEnabled&&console.log("rewrite the article to the dom",v),e.load(v)))}}function p(a,b){for(var c in b)a[b[c].index]=void 0}function c(a,b,c){for(var e in x){var g=x[e],d=g.getResponseHeader("Location");d&&HOMapper.updateEntityByExtraction(a,b,c,d,u,g.index)}}var k=this,e=d,q=m,u=h,A=f,w=null,t=[],y=0,C=[],x=[],v=null,g=0,n=null;this.register=function(a){t.push(a)};this.fail=function(b){C.push(b);return null!==w?(isLogEnabled&&console.log("a delegated file has failed.",b.file),a(),!0):!1};this.success=
function(b){if(null!==w)return x.push(b),a(),!0;y++;return!1};this.delegate=function(a,b){if(t.length===C.length+y+x.length)return!1;w=a;this.popup("uploading files...");isLogEnabled&&console.log("The main request is delegated.",w);return!0};this.putData=function(a){v=a;for(var b in v)if(a=v[b],!(""===a||void 0===a||null===a||a instanceof Array)){k.popup("uploading the files of "+a);break}isLogEnabled&&console.log("put the article from dom to the LazyLoader.",v)};this.popup=function(a){a?(null===
n&&(n=document.createElement("div"),n.classList.add("popup"),document.body.appendChild(n)),n.innerHTML=a):(n&&document.body.removeChild(n),n=null)}};function PreuploadBoardEditor(d,m,l,h,f,a){function b(){if(z){if("function"===typeof r.close&&r.close(),!0===U){isLogEnabled&&console.log("cannot rollback POST or DELETE of associated files.");U=!1;var a={};a.caller=WhUtils.getValueFromHistory("caller");x.publishEvent("reload",void 0,a)}}else c(),p()}function p(a,b){if("object"===typeof a)void 0===b?(isLogEnabled&&console.log("The editor '"+v+"' is opened with an entity,",a),N=ca,Z="PUT",HOMapper.writeEntity(g,a,n),E&&e(E)):(F=b,isLogEnabled&&console.log("The editor '"+
v+"' is opened with an entity and a transaction token,",a,F),N=T,HOMapper.writeEntity(g,a,n),E&&e(E,F));else{F=Date.now();isLogEnabled&&console.log("initiating an editor with a new token",F);N=T;if(aa)a:{a=aa;b=WhUtils.correctUri(location.pathname).split("/");for(var c=0;c<a.length;c++){var d=a[c];if(-1!==b.indexOf(d.value)&&!1===d.disabled){d.selected=!0;break a}}}ba.focus()}O=new LazyUploader(x,n,F,Q,N)}function c(){S=!1;J=F=void 0;Z="POST";O=null;B=!1;HOMapper.deleteResultsByBase(g,n);HOMapper.clearClones(g);
da?da.reset():WhUtils.reset(g)}function k(a,b){if(void 0!==a&&void 0!==b){var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===this.readyState)switch(this.status){case 200:case 202:case 204:isLogEnabled&&console.log("The file is deleted successfully.");break;case 401:alert("not logged in");x.publishEvent("unauthorized");break;default:console.log("not implemented status",this.status,this);try{console.log("BODY : ",JSON.parse(this.response))}catch(ea){console.log(ea)}}};isLogEnabled&&console.log("files delete request to ",
b);c.open("DELETE",b,!0);c.setRequestHeader("X-Transaction-Token",a);c.send()}}function e(a,b){a=a.querySelectorAll(".file-delete");for(var c=0;c<a.length;c++)q(a[c],b)}function q(a,b,c){function e(a){var c=a;do c=c.parentElement;while(c&&!c.classList.contains("file-container"));if(null!==c&&(a=c.querySelector("A.file-anchor").href)){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===this.readyState)switch(this.status){case 200:case 202:case 204:isLogEnabled&&console.log("The file is deleted successfully.");
c.parentElement.removeChild(c);console.log(b);b||(U=!0);break;case 401:alert("not logged in");x.publishEvent("unauthorized");break;case 409:alert("The resource is currently being used by someone. Try it later.");break;default:console.log("not implemented status",this.status,this);try{console.log("BODY : ",JSON.parse(this.response))}catch(ia){console.log(ia)}}};isLogEnabled&&console.log("a file delete request to ",a);e.open("DELETE",a,!0);b&&e.setRequestHeader("X-Transaction-Token",b);e.send()}}a.addEventListener("click",
function(a){(b||window.confirm("Even if you CANCEL the edition, you CANNOT ROLL BACK the deletion. Would you like to continue to delete the file?"))&&e(a.currentTarget)})}function u(a,b){return(new RegExp(b.replace(/\./,"\\.")+'(?=("|<))')).test(a)}function A(){var a=x.getAccount();return null!==a&&"guest"!==a.auth.toLowerCase()}function w(a){var b=a.target.files;if(L.length+b.length>R)alert("only "+R+" file(s) can be uploaded per article.");else{for(var c=0;c<b.length;c++){var e=b[c];if(!A()){alert("please log in first");
break}if(u(E.innerHTML,e.name))alert(e.name+" is duplicated.");else if(2147483648<e.size)alert("'"+e.name+"' is too large. It should be should be smaller than "+X+".");else{var d=HOMapper.appendFileElement(K,e);console.log(" clone",e,d);d.classList.add("file-processing");var f=d.querySelector(".file-gauge"),k=new XMLHttpRequest;k.file=e;k.index=d.dataset.clonedIndex;k.isAborted=!1;O.register(k);var r=d.querySelector(".file-delete");q(r,F,k);(function(a,b,c,e,d){c.onreadystatechange=function(){if(4===
this.readyState)switch(this.status){case 200:case 204:b.success(this);break;case 201:if(!b.success(this)){a.classList.remove("file-processing");var e=c.getResponseHeader("Location");isLogEnabled&&console.log("file created at "+e);var g={},f=n;HOMapper.updateEntityByExtraction(g,f,N,e,Q,this.index);isLogEnabled&&console.log("a file entity extracted from that location",g);HOMapper.applyEntity(a,g,f);isLogEnabled&&console.log("applying the file entity to ",a);d||(U=!0)}break;case 401:!b.fail(this)&&
E.contains(a)&&E.removeChild(a);try{console.log("unauthorized : ",this.file.name,JSON.parse(this.response))}catch(ka){console.log(ka)}alert("not logged in");this.publishEvent("unauthorized");break;case 0:!b.fail(this)&&E.contains(a)&&E.removeChild(a);!0===c.isAborted?console.log("'"+this.file.name+"' is aborted by the client."):(console.log("'"+this.file.name+"' is refused by the server."),alert("'"+this.file.name+"' is refused by the server."));break;default:!b.fail(this)&&E.contains(a)&&E.removeChild(a);
console.log("not implemented status "+this.status+" for ",this.file.name,this);try{console.log("BODY : ",JSON.parse(this.response))}catch(ka){console.log(ka)}}};e&&(c.upload.onprogress=function(a){a=a.loaded/a.total;e.style.width=100*a+"%";!0===c.isAborted&&c.abort();1===a&&(c.isCompleted=!0,e.classList.add("file-gauge-full"))})})(d,O,k,f,F);void 0===J&&(d=HOMapper.readEntity(n,g),isLogEnabled&&console.log("read an article from the editor",d),J=HOMapper.buildUri("POST",N,d,n),isLogEnabled&&console.log("build a file uri from",
N,"to",J));k.open("POST",J,!0);k.setRequestHeader("Content-Type",e.type);k.setRequestHeader("X-File-Name",encodeURIComponent(e.name));F&&k.setRequestHeader("X-Transaction-Token",F);k.send(e)}}a.target.value=""}}function t(){if(P)for(var a=P.children,b=a.length,c=0;c<b;c++){var e=a[c].style;"border-box"===e.boxSizing&&"8px"===e.padding&&"12px"===e.fontSize&&a[c].classList.add("en-code")}}function y(a){a.preventDefault();if(!A())alert("please log in first");else if(!1===B)if(B=!0,WhUtils.checkValidity(g)){if(P&&
(a=P.innerHTML.length,a<M[0]||a>M[1])){alert("The content size is too small or too large. "+M[0]+"~"+M[1]);P.focus();B=!1;return}"function"===typeof t&&t();x.publishEvent("block");a=F?"POST":"PUT";var c=new XMLHttpRequest;c.bean=x;c.transactionToken=F;c.method=a;var e=HOMapper.readEntity(n,g);isLogEnabled&&console.log("read an article from the editor",e);var d=HOMapper.buildUri(Z,W,e,n);isLogEnabled&&console.log("build an article uri from",W,"to",d);c.open(a,d,!0);c.requestUri=d;c.setRequestHeader("Content-Type",
"application/json;charset=UTF-8");F&&c.setRequestHeader("X-Transaction-Token",F);(S=O.delegate(c))?(function(a){c.onreadystatechange=function(){C.bind(this)(!0,a)}}(O),window.setTimeout(function(){e=HOMapper.readEntity(n,g);c.entity=e;isLogEnabled&&console.log("delagating an article to the LazyUploader",e);O.putData(e);b();x.publishEvent("unblock")},200)):(c.onreadystatechange=function(){C.bind(this)(!1,O)},window.setTimeout(function(){e=HOMapper.getNormalizedNew(HOMapper.readEntity(n,g));isLogEnabled&&
console.log("read the article from the dom",e);c.entity=e;c.send(JSON.stringify(e));B=!1},200))}else B=!1}function C(a,b){if(4===this.readyState){switch(this.status){case 200:case 204:isLogEnabled&&console.log("The article has been submitted successfully.");if(a)b.popup("succeeded"),window.setTimeout(function(){b.popup("")},1E3);else{var c=WhUtils.getValueFromHistory("caller");void 0!==c&&!0===I?(history.replaceState(null,null,location.pathname+location.search),isLogEnabled&&console.log("The article is modified and the container forwards to",
c),x.publishEvent("load",c)):(isLogEnabled&&console.log("Reloading the page"),x.publishEvent("reload"))}break;case 201:(c=this.getResponseHeader("Location"))?isLogEnabled&&console.log("The article has been posted successfully to a location",c):isLogEnabled&&console.log("status 201, but no location returned. The requestUri was",this.requestUri);a?(b.popup("succeeded"),window.setTimeout(function(){b.popup("")},1E3)):(c&&!0!==I?(a={},HOMapper.updateEntityByExtraction(a,n,W,c),isLogEnabled&&console.log("a article entity extracted from that location",
a)):a=this.entity,c=HOMapper.buildUri("GET",Y,a,n),isLogEnabled&&console.log("build a redirect uri from",Y,"to",c),x.publishEvent("load",c));break;case 401:alert("not logged in");x.publishEvent("unauthorized");break;case 408:alert("failed. server busy. try again");break;default:console.log("not implemented status",this.status,this);try{console.log("BODY : ",JSON.parse(this.response))}catch(ea){console.log(ea)}}B=!1;x.publishEvent("unblock")}}if("string"!==typeof d)throw Error("A non-empty string value of ID is required for BoardEditor.");
var x=this;this.annotations={$CloseByFlow:function(a){z||G||a&&!a.contains(g)||c()},$Init:function(a){z||G||a&&!a.contains(g)||p()},$Bound:function(a){r=a;z=!0},$GetAccount:"getAccount"};var v=d,g,n=m,r=null,z=!1,H=!1,G=!1,I=!0,F,S=!1,B=!1,U=!1,ba,D,V,P,M=[10,1E3],da,aa,fa,E,K,Q,L,R=5,X=WhUtils.getNumberFormatted(2147483648,1),W=l,Z="POST",T=h,ca=f,N,J,Y=a,O=null;this.load=function(a,b){z&&!H?"function"===typeof r.open&&r.open(a,b):(c(),p(a,b))};this.getName=function(){return v};this.getAccount=void 0;
this.setArticleUriMapping=function(a){W=a};this.setPreuploadUriMapping=function(a){T=a};this.setUploadUriMapping=function(a){ca=a};this.setLocationMapping=function(a){Y=a};this.setListViewOnSuccess=function(a){I=a};this.setMaxNumOfFiles=function(a){R=a};this.setContentSize=function(a,b){M[0]=a;M[1]=b};this.setRetaining=function(a){G=a};this.getTargetElement=function(){return g};this.open=function(a,b){H||!z||G||(H=!0,p(a,b))};this.close=function(){H&&z&&!G&&(H=!1,c())};WhUtils.defer(function(){if(!window[v])throw Error("An ID of '"+
v+"' is not found.");if(window[v]instanceof HTMLCollection)throw Error("The BoardEditor of '"+v+"' is duplacated by ID.");g=window[v];g.dataset.beanName=v;ba=(P=g.querySelector("[contenteditable=true]"))||g.querySelector("input[type=text]");if(!ba)throw Error("The BoardEditor of '"+v+"' is not eligible for an editor.");D=g.querySelector(".cancel");if(!D)throw Error("The BoardEditor of '"+v+"' requires an element with a class name 'cancel'.");D.addEventListener("click",function(){S||k(F,J);b()});V=
g.querySelector(".submit")||g.querySelector("input[type=submit]");if(!V)throw Error("The BoardEditor of '"+v+"' requires an element with a class name 'submit' or a submit-type input element.");V.addEventListener("click",y);da=g.querySelector("form");aa=g.querySelector("select");if(fa=g.querySelector("input[type='file']")){if(E=g.querySelector(".file-display"))if(K=E.querySelector(".file-container[data-collection]:not(.cloned)"))Q=K.dataset.collection,L=E.getElementsByClassName("cloned");fa.addEventListener("change",
w)}})};function Renderer(d){var m=d||"renderer";this.annotations={$Render:"render"};var l={};this.appendFormatter=function(a,b){"string"===typeof a&&"function"===typeof b?l[a]=b:console.log(a,"and",b,"must be a pair of string and function")};this.removeFormatter=function(a){a in l&&(l[a]=void 0)};var h=void 0;this.dateFormatter=function(a,b,d){b=Number(a);return 0<b?"function"===typeof h?h(b):(new Date(b)).toDateString():a};var f=void 0;this.byteFormatter=function(a){var b=Number(a);return 0<b?"function"===
typeof f?f(b):WhUtils.getNumberFormatted(b):a};this.getName=function(){return m};this.setDateFormatter=function(a){h=a};this.setByteFormatter=function(a){f=a};this.render=function(a){a=a.getElementsByClassName("render");for(var b=a.length,d=0;d<b;d++){var c=a[d],f=c.dataset.render,e=c.dataset.titlePrefix||"";if(f in l)f=l[f],void 0!==f&&(c.innerHTML=f(c.innerHTML));else switch(f){case "date":f=c;var h=c.innerHTML;var m=Number(h);h=0<m?(new Date(m)).toString():h;f.title=e+h;c.innerHTML=this.dateFormatter(c.innerHTML);
break;case "byte":c.title=e+c.innerHTML;c.innerHTML=this.byteFormatter(c.innerHTML);break;case "add":c.innerHTML=Number(c.innerHTML)+Number(c.dataset.add)}}}};function SectionFlow(d,m){function l(a){if(void 0===a.dataset.navigator){var b=void 0;if("A"===a.tagName)""!==a.pathname&&(b=WhUtils.correctUri(a.pathname).slice(1).split("/"));else if(void 0!==a.dataset.href){var c=a.dataset.href;b=(/\?/.test(c)?WhUtils.correctUri(c.slice(0,c.indexOf("?"))):WhUtils.correctUri(c)).slice(1).split("/")}void 0!==b&&(c=b[0]in w?b[0]:void 0,b=void 0!==c?b[1]in w[c]?b[1]:void 0:void 0,void 0!==c?(a.dataset.navigator="true",void 0!==b?a.classList.add(c+"-"+b+"-navigator"):
a.classList.add(c+"-navigator")):a.dataset.navigator="false")}}function h(a,b){WhUtils.differentiate(function(a){a.classList.add("selected")},void 0!==b?[C[a],C[a+"/"+b]]:C[a])}this.annotations={$BuildAtStart:function(a){if(a){for(var b=a.getElementsByTagName("A"),c=b.length,e=0;e<c;e++)l(b[e]);a=a.getElementsByClassName("spa-link");b=a.length;for(e=0;e<b;e++)l(a[e])}}};var f,a,b,p,c,k,e,q="string"===typeof d?d:"sectionFlow",u,A,w,t=[],y,C,x=document.getElementsByClassName("selected"),v=[],g=[],n=
[];this.getName=function(){return q};this.getCurrentArea=function(){return e};this.appendPseudoSectionTree=function(){for(var a=arguments.length,b=0;b<a;b++)t.push(arguments[b])};this.appendSectionFunction=function(a){if("function"!==typeof a)throw a=Error(),a.message="The argument should be a function with an argument of a section name.",a;v.push(a)};this.appendSubSectionFunction=function(a){if("function"!==typeof a)throw a=Error(),a.message="The argument should be a function with an argument of a sub-section name.",
a;g.push(a)};this.appendFlowFunction=function(a){if("function"!==typeof a)throw a=Error(),a.message="The argument should be a function with an argument of a section name.",a;n.push(a)};this.getAdjustment=function(a,b,c){for(var e=a.slice(1).split("/"),d={names:[]},g=w,f=0;2>f;f++){var k=e[f];if(void 0===k){""in g?(e.push(""),d.names[f]=""):(k=Object.keys(g)[0],void 0!==k&&(e.push(k),d.names[f]=k,d.replacement=a+(/\/$/.test(a)?"":"/")+k));break}else if(k in g)d.names[f]=k;else if(""===k)k=Object.keys(g)[0],
d.names[f]=k,d.replacement=a+k;else{d.names[f]=void 0;break}g=g[d.names[f]]}d.pathNameArray=e;void 0===d.replacement?(d.replacement=a,d.isReplaced=!1):d.isReplaced=!0;void 0!==b&&(d.replacement+=b);void 0!==c&&(d.replacement+=c);return d};this.flow=function(d,g,v,m){void 0!==d&&void 0!==g&&void 0!==v&&void 0!==m?(f=d,a=g,g=m):(g=this.getAdjustment(location.pathname,location.search,location.hash),d=g.replacement,f=g.names[0],a=g.names[1],g=g.pathNameArray,d!==location.pathname+location.search+location.hash&&
history.replaceState(history.state,null,d));isLogEnabled&&console.log("The web flow manager is parsing the section and subsection, ",f,a);if(void 0===f&&0!==Object.keys(w).length||void 0!==f&&void 0===a&&0!==Object.keys(w[f]).length)f="not-found",a=void 0,isLogEnabled&&console.log("SectionFlow has determined the uri invalid."),history.replaceState(null,null,"/not-found");b=void 0!==f?u.querySelector('.section[data-section-name="'+f+'"]'):void 0;b=null===b?void 0:b;p=void 0!==a?b.querySelector('.sub-section[data-sub-section-name="'+
a+'"]'):void 0;p=null===p?void 0:p;if(void 0===b)throw Error("SectionFlow cannot find any section.");b.dataset.pathSegmentsLength<g.length&&(f="not-found",a=void 0,history.replaceState(null,null,"/not-found"));for(;0!==x.length;)x[0].classList.remove("selected");h(f,a);c===b?void 0!==p&&(void 0!==k&&k!==p&&k.classList.remove("sub-section-visible"),WhUtils.displayBlockAndAddClass(p,"sub-section-visible"),e=p):(window.scrollTo(0,0),void 0!==k&&k.classList.remove("sub-section-visible"),void 0!==c&&c.classList.remove("section-visible"),
WhUtils.displayBlockAndAddClass(b,"section-visible"),e=b,void 0!==p&&(WhUtils.displayBlockAndAddClass(p,"sub-section-visible"),e=p));d=f;g=a;for(var l in n)n[l](d,g);c=b;k=p?p:void 0;this.publishEvent("flow",e)};WhUtils.defer(function(){u=document.getElementsByClassName("sections")[0];if(!u){var a=Error();a.message='Any Element with a class "sections" is not found';throw a;}y=u.querySelector(".section[data-section-name='not-found']");y||(y=document.createElement("div"),y.classList.add("section"),
y.classList.add("card"),y.classList.add("long-card"),y.classList.add("scroller"),y.dataset.sectionName="not-found",a=document.createElement("A"),a.href="/",a.appendChild(document.createTextNode("home")),y.appendChild(document.createTextNode("page not found. go ")),y.appendChild(a),u.appendChild(y));y.dataset.pathSegmentsLength="1";A=u.getElementsByClassName("section");w={};var b=A.length;for(a=0;a<b;a++){w[A[a].dataset.sectionName]={};for(var c=A[a].getElementsByClassName("sub-section"),e=c.length,
d=0;d<e;d++)w[A[a].dataset.sectionName][c[d].dataset.subSectionName]=""}for(a in t)for(d in b=t[a].split("."),c=w,b)b[d]in c||(c[b[d]]={}),c=c[b[d]];C=new function(){for(var a in w)for(d in this[a]=document.getElementsByClassName(a+"-navigator"),w[a])this[a+"/"+d]=document.getElementsByClassName(a+"-"+d+"-navigator")};WhUtils.differentiate(function(a){WhUtils.opacityZeroToDisplayNone(a,"section-visible","section-left","section-right")},A);WhUtils.differentiate(function(a){WhUtils.opacityZeroToDisplayNone(a,
"sub-section-visible","sub-section-left","sub-section-right")},u.getElementsByClassName("sub-section"))})};function SinglePageApplicationInitializer(){function d(){var a=x.lastIndexOf("wait");-1!==a&&x.splice(a,1);m();window.setTimeout(function(){C.classList.remove("definite-block-visible")},300)}function m(){-1!==x.indexOf("wait")?document.body.style.cursor="wait":-1!==x.indexOf("progress")?document.body.style.cursor="progress":document.body.style.cursor=0===x.length?"auto":x[x.length-1]}function l(a){return u[a]?u[a]:null}function h(a,b,e){console.log("reload",a,b,e);history.replaceState(a,b,e||location.href);
c.flow()}function f(a,b,e){if("string"!==typeof e||e.startsWith("http"))throw Error("The third argument must be a concatenated string of location.pathname, location.search and location.hash.");e=WhUtils.correctUri(e);var d=e.indexOf("?");var g=e.indexOf("#");if(-1===g)var f="";else f=e.slice(g),e=e.slice(0,g);-1===d?g="":(g=e.slice(d),e=e.slice(0,d));e=c.getAdjustment(e,g,f);f=e.replacement;location.pathname+location.search+location.hash!==f?(WhUtils.putValuesToHistory("pageYOffset",window.pageYOffset),
history.pushState(a,b,f)):history.replaceState(null,null,f);c.flow(e.names[0],e.names[1],f,e.pathNameArray)}function a(a){if(a&&a.annotations){var b=a.annotations.$Closeable;if(b)if("function"===typeof b)b.bind(a)();else if("string"===typeof b)a[b]()}}function b(a,b,c){var e=q[a],d;for(d in e){var g=l(e[d]);if(!c||g!==c){var f=g.annotations[a];if("function"===typeof f)f.bind(g)(b);else if("string"===typeof f)g[f](b);else if("object"===typeof f)for(d in f)if("function"===typeof f[d])f[d].bind(g)(b);
else if("string"===typeof f[d])g[f[d]](b)}}}function p(c,g,k){switch(c){case "flow":(A=w)&&window.setTimeout(function(c){for(;0!==y.length;)a(y.pop());b("$CloseByFlow",c)},0,A);w=t=g;"done"!==g.dataset.build&&(b("$Build",g),g.dataset.build="done");d();b("$Init",g);g.classList.contains("suppress-render")||b("$Render",g);break;case "dialog-open":t=g;if(void 0===k)throw Error("no object");y.push(k);g.dataset.build||(b("$Build",g),g.dataset.build="done");d();b("$Init",g);g.classList.contains("suppress-render")||
b("$Render",g);break;case "dialog-back":g===y[y.length-1]&&(y.pop(),t=(k=y[y.length-1])&&k.getTargetElement?y[y.length-1].getTargetElement():w,d(),t.classList.contains("suppress-render")||b("$Render",t));break;case "dialog-flow":window.setTimeout(function(b){for(var c=null;(c=y.pop())&&c!==b;)a(c)},0,k);t=g;y.push(k);"done"!==g.dataset.build&&(b("$Build",g),g.dataset.build="done");d();g.classList.contains("suppress-render")||b("$Render",g);break;case "render":g=g||t;d();b("$Render",g,k);break;case "reload":h(k,
null,g);break;case "load":c={};k&&(c.forwarded=k);c.caller=location.pathname+location.search+location.hash;f(c,null,g);break;case "unblock":d();break;case "block":x.push("wait");m();WhUtils.displayBlockAndAddClass(C,"definite-block-visible");break;case "log-out":case "unauthorized":e.setAccount(null);break;case "propagateAccount":void 0!==g&&(isLogEnabled&&console.log("An account event is published, ",g),b("$AccountEventListerner",g));break;case "cursor-start":k=g;void 0!==k&&x.push(k);m();break;
case "cursor-end":k=g,void 0!==k&&(k=x.lastIndexOf(k),-1!==k&&x.splice(k,1)),m()}}history.replaceState(null,null,location.href);window.WhUtils=new WhUtilsImplementation;window.HOMapper=new HtmlObjectMapperUtils;isInfoEnabled&&console.info("starting SinglePageApplicationInitializer...",this);var c,k,e,q={},u={},A=null,w=null,t=null,y=[],C,x=[];this.setWebFlowManager=function(a){this.addBean(a);c=a;isInfoEnabled&&console.info("'"+c.getName()+"' is registared as a webFlowManager.")};this.setSpaLinkManager=
function(a){this.addBean(a);k=a;isInfoEnabled&&console.info("'"+a.getName()+"' is registared as a spaLinkManager.")};this.setAccountManager=function(a){this.addBean(a);e=a;isInfoEnabled&&console.info("'"+a.getName()+"' is registared as a accountManager.")};this.addBean=function(a,b){if("object"!==typeof a)throw Error("The first argument must be an object of a bean.");if(void 0!==b&&"string"!==typeof b)throw Error("The second argument must be a string of a bean name.");if(void 0===b)if(a.getName)b=
a.getName();else throw Error("cannot determine the name of the bean.");if(b in u)throw Error("Each bean name must be unique. The bean name is duplicated.");a.publishEvent=p;u[b]=a;isInfoEnabled&&console.info("A bean '"+a.getName()+"' is added to the SPA context.",a);for(var c in a.annotations)c in q||(q[c]=[]),q[c].push(b)};this.getBean=l;WhUtils.defer(function(){if(!c)throw Error("A webFlowManager is not found.");if(!k)throw Error("A spaLinkManager is not found.");if(!e)throw Error("A accountManager is not found.");
});WhUtils.defer(function(){var a=q.$SetAccount,b;for(b in a){var c=l(a[b]),d=c.annotations.$SetAccount;if("string"!==typeof d)throw Error("The argument of $SetAccount should be a string value of a indentifier of a public method.");(function(a,b){a[b]=function(a){isLogEnabled&&a&&console.log("An account is registered to the SPA",this,a);e.setAccount(a)}})(c,d)}a=q.$GetAccount;for(b in a){c=l(a[b]);d=c.annotations.$GetAccount;if("string"!==typeof d)throw Error("The argument of $GetAccount should be a string value of a indentifier of a public method.");
(function(a,b){a[b]=function(){return e.getAccount()}})(c,d)}a=q.$GetReadyState;for(b in a){c=l(a[b]);d=c.annotations.$GetReadyState;if("string"!==typeof d)throw Error("The argument of $GetReadyState should be a string value of a indentifier of a public method.");(function(a,b){a[b]=function(){var a=0===x.length?!0:!1;return a}})(c,d)}});WhUtils.defer(function(){var a={};a.shadowVisible=document.createTextNode(".definite-block.definite-block-visible {opacity: 0.5; cursor: wait; transition: opacity 225ms cubic-bezier(0.0, 0.0, 0.2, 1);}");
a.shadow=document.createTextNode(".definite-block{display:none;z-index:2147483647 ;position: fixed;margin :0;padding: 0 ;top: 0;opacity:0;left: 0;width: 100%;height: 100%;background-color: white;transition: opacity 195ms cubic-bezier(0.4, 0.0, 1, 1);}");var b=document.getElementsByTagName("STYLE")[0];b||(b=document.createElement("STYLE"),document.head.appendChild(b));for(var c in a)b.insertBefore(a[c],b.firstChild);C=document.createElement("div");C.classList.add("definite-block");a=document.getElementsByClassName("utilities")[0];
a||(a=document.createElement("div"),a.classList.add("utilities"),document.body.appendChild(a));a.appendChild(C);WhUtils.opacityZeroToDisplayNone(C,"definite-block-visible")});WhUtils.defer(function(){isDebugEnabled&&console.info("$BuildAtStart operational.");b("$BuildAtStart",document)},1);WhUtils.defer(function(){isDebugEnabled&&console.info("$BuildAtLast operational.");b("$BuildAtLast",document);isInfoEnabled&&console.info("The document has been loaded.");c.flow()},1E5);window.addEventListener("popstate",
function(){isInfoEnabled&&console.info("popstate event occured.",history.state);c.flow();var a=WhUtils.getValueFromHistory("pageYOffset"),b=WhUtils.getDocumentHeight();void 0!==a&&(b+window.innerHeight<a?function(c,e){console.log(b,a);var d=window.setInterval(function(){WhUtils.getValueFromHistory("pageYOffset")!==c||e!==location.href?window.clearInterval(d):WhUtils.getDocumentHeight()+window.innerHeight>=c&&(window.scrollTo(0,c),window.clearInterval(d))},500)}(a,location.href):(isInfoEnabled&&console.log("scroll by history",
a),window.scrollTo(0,a)))})};function SpaLinkManager(d){function m(a){if(void 0===a.dataset.spaLink)if("A"===a.tagName)if(null===a.getAttribute("href"))isLogEnabled&&console.log(h,"cannot parse an A element with no href",a);else{var b=a.host===location.host||""===a.host;if(!0===b)for(var d in f){if(a.pathname.startsWith(f[d])){b=!1;break}}else a.setAttribute("target","_blank");b&&(a.dataset.spaLink="href",a.addEventListener("click",function(a){a.preventDefault();a=a.currentTarget.getAttribute("href");null!==a&&(isLogEnabled&&
console.log("SpaLinkManager is publishing a load event",a),l.publishEvent("load",a))}),void 0!==a.parentElement.dataset.href&&(a.style.textDecoration="none"))}else if(void 0!==a.dataset.href){if(/:/.test(a.dataset.href))throw Error("A data-href attribute cannot have a external link.");a.dataset.spaLink="data-href";a.addEventListener("click",function(a){if("A"!==a.target.tagName){var b=a.currentTarget.dataset.href;void 0!==a.currentTarget.dataset.href&&(isLogEnabled&&console.log("SpaLinkManager is publishing a load event",
b),l.publishEvent("load",b))}})}}var l=this,h=d,f=[];this.annotations={$BuildAtStart:"appendSpaLinks",$Render:"appendSpaLinks"};this.getName=function(){return h};this.setSeoExclusion=function(){WhUtils.differentiate(f.push.bind(f),arguments)};this.appendSpaLinks=function(a){if(a){for(var b=a.getElementsByTagName("A"),d=b.length,c=0;c<d;c++)m(b[c]);a=a.getElementsByClassName("spa-link");b=a.length;for(c=0;c<b;c++)m(a[c])}}};function WhUtilsImplementation(){function d(a){if("function"!==typeof a){var b=Error();b.message="The first argument should be a function.";throw b;}b=arguments.length;for(var f=1;f<b;f++){var c=arguments[f];if("object"===typeof c&&void 0!==c.length&&void 0===c.options){var k=c.length;if(0===k)break;for(var e=0;e<k;e++)d(a,c[e])}else a(c)}}function m(a,b){b=b||!0;a instanceof HTMLElement&&"true"===a.dataset.autoclosable&&a.autoclosable instanceof Autoclosable&&a.autoclosable.close();if(b)for(a=a.querySelectorAll("[data-autoclosable=true]"),
b=0;b<a.length;b++)a[b].autoclosable instanceof Autoclosable&&a[b].autoclosable.close()}function l(){if("interactive"===document.readyState){isLogEnabled&&console.log("Starting the deferred tasks...");document.removeEventListener("readystatechange",l);for(var a in h)for(var b in h[a])h[a][b]()}}var h=[],f={};this.setLogger=function(a){window.isTraceEnabled=!1;window.isDebugEnabled=!1;window.isInfoEnabled=!1;window.isLogEnabled=!1;window.isWarnEnabled=!1;window.isTraceEnabled="trace"===a||!1;window.isDebugEnabled=
window.isTraceEnabled||"debug"===a||!1;window.isInfoEnabled=window.isDebugEnabled||"info"===a||!1;window.isLogEnabled=window.isInfoEnabled;window.isWarnEnabled=window.isInfoEnabled||"warn"===a||!1};this.setLogger(window.loggingLevel);this.differentiate=d;this.displayBlockAndAddClass=function(a){if(!(a instanceof HTMLElement)){var b=Error();b.message="The first argument should be an instance of HTMLElement.";throw b;}a.style.display=a.dataset.display||"block";setTimeout(function(b){for(var c=1;c<b.length;c++){if("string"!==
typeof b[c])throw b=Error(),b.message="The second or further element should be a class name string.",b;a.classList.add(b[c])}},10,arguments)};this.opacityZeroToDisplayNone=function(a){a instanceof HTMLElement&&(a.style.display="none",this.appendAutoclosable.apply(null,arguments),this.appendAutoclosable(a,function(){"0"===window.getComputedStyle(a).opacity&&(a.style.display="none")}),a.addEventListener("transitionend",function(a){a.target===a.currentTarget&&"opacity"===a.propertyName&&"0"===window.getComputedStyle(a.currentTarget).opacity&&
(a.currentTarget.style.display="none",m(a.currentTarget))}))};this.setAutoclosable=function(a){if(!(a instanceof HTMLElement))throw Error("The first argument should be an instance of HTMLElement.");a.dataset.autoclosable="true";void 0===a.autoclosable?a.autoclosable=new Autoclosable:a.autoclosable.clearArguments();a.autoclosable.applyArguments.apply(a.autoclosable,arguments)};this.appendAutoclosable=function(a){if(!(a instanceof HTMLElement)){var b=Error();b.message="The first argument should be an instance of HTMLElement.";
throw b;}a.dataset.autoclosable="true";void 0===a.autoclosable&&(a.autoclosable=new Autoclosable);a.autoclosable.applyArguments.apply(a.autoclosable,arguments)};this.removeAutoclosable=function(a){if(!(a instanceof HTMLElement))throw a=Error(),a.message="The first argument should be an instance of HTMLElement.",a;a.dataset.autoclosable="false";a.autoclosable=void 0};this.autoclose=m;this.removeChildNodes=function(a){if(!(a instanceof HTMLElement))throw Error("The argument should be a instance of HTMLElement.");
for(var b;b=a.lastChild;)a.removeChild(b)};this.putValuesToHistory=function(){for(var a=history.state||{},b=arguments.length,d=0;d<b;d+=2)a[arguments[d]]=arguments[d+1];history.replaceState(a,null,location.href)};this.getValueFromHistory=function(a){if(history.state)return history.state[a]};this.deleteValueFromHistory=function(){if(null!==history.state){for(var a=history.state,b=arguments.length,d=0;d<b;d++)arguments[d]in a&&(a[arguments[d]]=void 0);history.replaceState(a,null,location.href)}};this.goToTheTop=
function(){window.scrollTo(0,0)};this.getDocumentHeight=function(){var a=document.body,b=document.documentElement;return Math.max(a.scrollHeight,a.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight)};this.setCenter=function(a){"fixed"!==getComputedStyle(a).position&&(a.style.position="fixed");a.style.top=((a.parentElement===document.body?window.innerHeight:a.parentElement.clientHeight)-a.clientHeight)/2+"px";a.style.left=(a.parentElement.clientWidth-a.clientWidth)/2+"px"};this.toCamel=function(a){if("string"===
typeof a)return a.replace(/-[a-z]/g,function(a){return a.slice(1).toUpperCase()})};this.toHyphens=function(a){if("string"===typeof a)return a.replace(/[A-Z]/g,function(a){return"-".concat(a.toLowerCase())})};this.getNumberFormatted=function(a,b){b=Math.pow(10,b||1);if(0x1000000000000000<=a)return Math.round(a/0x1000000000000000*b)/b+"E";if(0x4000000000000<=a)return Math.round(a/0x4000000000000*b)/b+"P";if(1099511627776<=a)return Math.round(a/1099511627776*b)/b+"T";if(1073741824<=a)return Math.round(a/
1073741824*b)/b+"G";if(1048576<=a)return Math.round(a/1048576*b)/b+"M";if(1024<=a)return Math.round(a/1024*b)/b+"K"};this.formToEntity=function(a,b,d){if(!(a instanceof HTMLFormElement))throw a=Error(),a.message="The first argument should be an instance of HTMLFormElement.",a;if("function"!==typeof b)throw a=Error(),a.message="The second argument should be a constructive function.",a;var c=new FormData(a),f=a.querySelector("[contentEditable]");if(f){if(f.hasAttribute("name"))var e=f.getAttribute("name");
else void 0!==f.name&&(e=f.name);e&&c.append(e,f.innerHTML)}b=new b;c=c.entries();for(e=c.next();!e.done;e=c.next())if(e.value[0]in b){f=e.value[0];e=e.value[1];if(e instanceof File){if(""===e.name)continue;var h=f;var m=new d;for(var l in m)/name/i.test(l)?m[l]=e.name:/size/i.test(l)?m[l]=e.size:/lastmodified/i.test(l)?m[l]=e.lastModified:/type/i.test(l)&&(m[l]=e.type);e=m}void 0===b[f]?b[f]=e instanceof d?[e]:e:(b[f]instanceof Array||(b[f]=[b[f]]),b[f].push(e))}for(e in b)if(/Id$/.test(e)&&void 0!==
b[e])for(l in b[h])e in b[h][l]&&(b[h][l][e]=b[e]);window.isDebugEnabled&&console.log(a," is converted to ",b);return b};this.entityToForm=function(a,b){if("object"!==typeof a)throw a=Error(),a.message="The first argument should be a object.",a;if(!(b instanceof HTMLFormElement))throw a=Error(),a.message="The second argument should be an instance of HTMLFormElement.",a;var d=b.elements;if(b=b.querySelector("[contentEditable]")){if(b.hasAttribute("name"))var c=b.getAttribute("name");else void 0!==
b.name&&(c=b.name);c in a&&(b.innerHTML=a[c])}for(var f in a){var e;if((e=d[f])&&"file"!==e.type)if("checkbox"===e.type)e.value===a[f]&&(e.checked=!0);else if("select-multiple"===e.type&&a[f]instanceof Array)for(c=e.options.length,b=0;b<c;b++)-1!==a[f].indexOf(e.options[b].value)&&(e.options[b].selected=!0);else e.value=a[f]}};this.checkValidity=function(a,b){function d(a,b){if(a.checkValidity())return!0;var c=a.validationMessage;if(!0===a.validity.patternMismatch){var e=a.dataset.patternDescription;
c=e?c.concat(" : ").concat(e):c.concat(" : ").concat(a.pattern)}b(c);a.focus();return!1}b=b||window.alert;for(var c=a.getElementsByTagName("INPUT"),f=c.length,e=0;e<f;e++)if(!d(c[e],b))return!1;c=a.getElementsByTagName("TEXTAREA");f=c.length;for(e=0;e<f;e++)if(!d(c[e],b))return!1;a=a.getElementsByTagName("SELECT");c=a.length;for(e=0;e<c;e++)if(!d(a[e],b))return!1;return!0};this.setDisabled=function(a,b){if("boolean"!==typeof b)throw Error("The function 'setDisabled' requires a boolean argument.");
var d=a.getElementsByTagName("INPUT"),c=a.getElementsByTagName("SELECT"),f=a.getElementsByTagName("TEXTAREA");this.differentiate(function(a){a.disabled=b},d,c,f);a=a.querySelectorAll("[contenteditable]");this.differentiate(function(a){a.contentEditable=!b},a)};this.reset=function(a){var b=a.getElementsByTagName("INPUT"),d=a.getElementsByTagName("SELECT"),c=a.getElementsByTagName("TEXTAREA");a=a.querySelectorAll("[contenteditable]");this.differentiate(function(a){switch(a.type){case "checkbox":case "radio":!0===
a.defaultChecked&&(a.checked=!0);break;default:a.value=a.defaultValue}},b);this.differentiate(function(a){for(var b=a.length,c=0;c<b;c++){var d=a[c];!0===d.defaultSelected&&(d.selected=!0)}},d);this.differentiate(function(a){a.value=""},c);this.differentiate(function(a){a.innerHTML=""},a)};this.showXhttpMessage=function(a,b){var d=null;try{d=JSON.parse(a.response)}catch(e){console.log(e)}if(null!==d){if(d instanceof Array){var c="";for(var f in d)void 0!==d[f].message&&(c=c+d[f].message+"\n")}else c=
d.message;!0===b&&alert(a.statusText+(c?"\n"+c:""));console.log(a.statusText,d,a.requestUri)}else!0===b&&alert(a.statusText),console.log(a.statusText,a.response,a.requestUri)};this.buffer=function(a,b,d){var c=a.name;""===c&&console.trace("Anonymous functions are not allowed for 'WhUtils.buffer'.");d=d||"ignore";var k=Date.now();switch(d){case "ignore":c in f?0===f[c].timeout&&(d=k-f[c].ignoreSince,d>b?(a(),f[c].ignoreSince=k,f[c].timeout=0):f[c].timeout=window.setTimeout(function(){a();f[c].ignoreSince=
k;f[c].timeout=0},b-d)):(a(),f[c]={ignoreSince:k,timeout:0});break;case "queue":throw b=Error(),b.message="not implemented... sorry ... this is not so useful as i spend my time.",b;}};this.defer=function(a,b){b=b||0;if("function"!==typeof a)throw a=Error(),a.message="The argument should be a function.",a;h[b]instanceof Array||(h[b]=[]);h[b].push(a)};this.correctUri=function(a){return a.trim().replace(/\/\/+/g,"/").replace(/\/(?=\?|\#|$)/,"").replace(/[?#]+$/,"").replace(/^(?![\/])/,"/")};document.addEventListener("readystatechange",
l)}
function Autoclosable(d){var m,l=[],h=[];this.applyArguments=function(d){if(d instanceof HTMLElement)if(void 0===m)m=d;else{if(m!==d){var a=Error();a.message="The new element doesn't match the old one.";throw a;}}else throw a=Error(),a.message="The first argument should be an instance of HTMLElement.",a;a=arguments.length;for(var b=1;b<a;b++)if("function"===typeof arguments[b])h.push(arguments[b]);else if("string"===typeof arguments[b])-1===l.indexOf(arguments[b])&&l.push(arguments[b]);else throw a=Error(),
a.message="The second or further argument should be a function or a class name string.",a;};this.close=function(){for(var d in l)m.classList.remove(l[d]);for(d in h)h[d]()};this.clearArguments=function(){m=void 0;l=[];h=[]};0<arguments.length&&this.applyArguments.apply(this,arguments)};function BottomFooter(d){function m(){l.isReady()&&(window.clearInterval(b),b=0,window.setTimeout(function(){if(0===b){for(var c=0,d=a;;){c+=d.clientTop+d.offsetTop;if(null===d.offsetParent){c=0;break}if("BODY"==d.offsetParent.nodeName)break;d=d.offsetParent}c+a.clientHeight<window.innerHeight?(a.style.position="fixed",a.style.bottom="0"):(a.style.position="relative",a.style.bottom="auto");a.classList.add(f)}},500))}var l=this,h=d||"bottomFooter",f=h+"-visible",a,b=0,p="&*(";this.annotations={$GetReadyState:"isReady"};
this.getName=function(){return h};this.execute=function(){var c=location.pathname+location.search;p!==c&&(p=c,a.classList.remove(f),0!==b&&window.clearInterval(b),b=window.setInterval(m,1E3),setTimeout(function(){a.style.position="relative"},0))};WhUtils.defer(function(){if(!window[h])throw Error("An ID of '"+h+"' is not found.");if(window[h]instanceof HTMLCollection)throw Error("The Board of '"+h+"' is duplacated by ID.");a=window[h];a.dataset.beanName=h;document.body.appendChild(a)})};function Conditional(d,m,l,h){function f(){var a=l(),b=e.length;if(!0===a)for(a=0;a<b;a++)e[a].classList.add(c);else if(!1===a)for(a=0;a<b;a++)e[a].classList.remove(c);else throw Error("The conditaional function should return a boolean value.");}function a(a){a=a.currentTarget;if(a.classList.contains(p)){var b=l();if(!0===b)a.classList.add(c);else if(!1===b)a.classList.remove(c);else throw Error("The conditaional function should return a boolean value.");}}if("string"!==typeof d)throw Error("The first argument should be a string of a name.");
if(m instanceof Array)for(var b in m){if(!("on"+m[b]in window))throw Error("invalid event");}else throw Error("The second argument should be an array.");if("function"!==typeof l)throw Error("The third argument should be a function.");if("string"!==typeof h)throw Error("The fourth argument should be a string of a css node.");var p=d,c=p+"-satisfied",k=["resize","scroll","load"];this.getName=function(){return p};var e;d=document.createTextNode("."+c+" {"+h+"}");h=document.getElementsByTagName("STYLE")[0];
h||(h=document.createElement("STYLE"),document.head.appendChild(h));h.insertBefore(d,h.firstChild);WhUtils.defer(function(){e=document.getElementsByClassName(p);var b=e.length,c;for(c in m){var d=m[c];if(-1!==k.indexOf(d))window.addEventListener(d,f);else if("image-load"===d)for(var h=0;h<b;h++)d=e[h],"IMG"===d.tagName&&d.addEventListener("load",a);else for(h=0;h<b;h++)e[h].addEventListener(d,a)}})};function MenuIcon(d,m,l,h){if("string"!==typeof d)throw Error("The first argument of a string is required.");this.annotations={$BuildAtStart:function(){if(a.hasChildNodes())throw Error("MenuIcon '"+f+"' does not allow any childnode.");WhUtils.appendAutoclosable(a,f+"-arrow");var d=document.createElement("div");d.classList.add(f+"-kernel");a.addEventListener("click",function(a){b||a.currentTarget.classList.toggle(f+"-arrow")});var c=document.createElement("div"),k=document.createElement("div"),e=document.createElement("div");
c.classList.add(f+"-bar-first");k.classList.add(f+"-bar-second");e.classList.add(f+"-bar-third");d.appendChild(c);d.appendChild(k);d.appendChild(e);a.appendChild(d)},$Bound:function(a){b=!0}};var f=d,a,b=!1;this.getName=function(){return f};this.close=function(){a.classList.remove(f+"-arrow")};this.open=function(){a.classList.add(f+"-arrow")};this.toggle=function(){a.classList.toggle(f+"-arrow")};d=document.createTextNode("#"+f+" ."+f+"-kernel { width: 50%; height: 100%; margin: auto; position: relative; } #"+
f+" * { transition: all "+("number"===typeof h?h:500)+"ms cubic-bezier(0.4, 0, 0.2, 1); } #"+f+' [class*="bar"] { background-color: '+("string"===typeof m?m:"rgba(0, 0, 0, 1)")+"; position: absolute; top: 0; left: 0; width: 100%; height: 10%; border-radius : 1rem ;} #"+f+':hover [class*="bar"]{background-color:'+("string"===typeof l?l:"orange")+";} #"+f+' [class*="first"] { transform: translateY(450%); } #'+f+' [class*="second"] { transform: translateY(250%); } #'+f+' [class*="third"]{ transform: translateY(650%); } #'+
f+"."+f+"-arrow ."+f+"-kernel { transform: rotate(-180deg) ; } #"+f+"."+f+'-arrow [class*="second"] { transform: translateX(65%) translateY(450%) rotate(45deg); transform-origin: 87% 50%; width: 65%; } #'+f+"."+f+'-arrow [class*="third"] { transform: translateX(65%) translateY(450%) rotate(-45deg); transform-origin: 87% 50%; width: 65%; }');m=document.getElementsByTagName("STYLE")[0];m||(m=document.createElement("STYLE"),document.head.appendChild(m));m.insertBefore(d,m.firstChild);WhUtils.defer(function(){if(!window[f])throw Error("An ID of '"+
f+"' is not found.");if(window[f]instanceof HTMLCollection)throw Error("The MenuIcon of '"+f+"' is duplacated by ID.");a=window[f]})};function Rippler(d,m,l){function h(d){if(void 0===d.dataset.rippleName){if("static"===window.getComputedStyle(d).position)throw Error("Rippler '"+b+"' does not allow 'static' elements.");d.dataset.rippleName=b;d.addEventListener("mouseup",a);var e=document.createElement("div");e.classList.add(p);var f=document.createElement("div");f.classList.add(c);f.addEventListener("transitionend",function(a){this.classList.remove(k)});e.appendChild(f);d.insertBefore(e,d.firstChild)}}function f(a){if(a){a=a.getElementsByClassName(b);
for(var c=a.length,d=0;d<c;d++)h(a[d])}}function a(a){if(a.target.classList.contains(c)){if(!q)return;var d=a.target.offsetParent}else d=a.target;var f=a.currentTarget,h=f.firstChild;if(!h.classList.contains(p))throw Error("Ripple '"+b+"' has been spoilt by ",h,". It should occupy the first childnode.");var l=h.firstChild;l.classList.remove(k);var m=f.clientWidth,g=f.clientHeight;h.style.width=m+"px";h.style.height=g+"px";h="max"===e?Math.max(m,g):"min"===e?Math.min(m,g):(m+g)/2;l.style.width=h+"px";
l.style.height=h+"px";for(m=h=0;d!==f;)"SPAN"===d.tagName&&u||"A"===d.tagName&&!A||(h+=d.clientLeft+d.offsetLeft,m+=d.clientTop+d.offsetTop),d=d.offsetParent;l.style.left=h+a.offsetX-l.clientWidth/2+"px";l.style.top=m+a.offsetY-l.clientHeight/2+"px";setTimeout(function(){l.classList.add(k)},0)}this.annotations={$BuildAtStart:f,$Render:f};var b="string"===typeof d?d:"ripple",p=b+"-wrapper",c=b+"-init",k=b+"-active";d="string"===typeof m?m:"rgba(255, 255, 255, 0.6)";l="number"===typeof l?l:500;var e=
"mean",q=/Chrome/.test(window.navigator.userAgent),u=/\.NET/.test(window.navigator.userAgent),A=/Firefox/.test(window.navigator.userAgent);this.getName=function(){return b};this.setRippleSize=function(a){e=a};l=document.createTextNode("."+b+"-wrapper{ position: absolute; top: 0; left: 0; border-radius: inherit; overflow: hidden;} ."+b+"-init { position: absolute; background: "+d+"; border-radius: 50%; opacity: 1; transform: scale(0); } ."+b+"-active { opacity: 0; transform: scale(1); transition: all "+
l+"ms cubic-bezier(0.0, 0.0, 0.2, 1); }");d=document.getElementsByTagName("STYLE")[0];d||(d=document.createElement("STYLE"),document.head.appendChild(d));d.insertBefore(l,d.firstChild)};function Scroller(d,m,l,h,f,a){function b(a){void 0===a.dataset.scrollerName&&(a.dataset.scrollerName=e,a.addEventListener("transitionend",function(b){b.target===a&&"opacity"===b.propertyName&&(b.currentTarget.classList.remove(q),b.currentTarget.classList.remove(A))}),"IMG"===a.tagName&&""===a.src&&void 0!==a.dataset.imgSrc&&a.addEventListener("load",function(){a.classList.add(q);c()}),WhUtils.appendAutoclosable(a,q,u,A))}function p(a){a&&(t=a);if(t){a=t.getElementsByClassName(e);y=[];C=[];x=[];for(var b=
0,d=a.length,f=0;f<d;f++){for(var g=0,h=a[f];;){g+=h.clientTop+h.offsetTop;if(null===h.offsetParent){g=0;break}if("BODY"==h.offsetParent.nodeName)break;h=h.offsetParent}0!==g&&(y[b]=g,C[b]=g+a[f].clientHeight,x[b]=a[f],b++)}window.setTimeout(c,500)}}function c(){for(var a=window.innerHeight+window.pageYOffset-z,b=y.length-1;0<=b;b--)if(y[b]>a)x[b].classList.remove(A),x[b].classList.remove(q),H&&x[b].classList.remove(u);else{for(var c=0;c<=b;c++){var d=x[c],e=y[c];d.classList.contains(u)||d.classList.contains(q)||
!(window.pageYOffset<e&&e<a||window.pageYOffset>e&&window.pageYOffset<C[c])||(""===d.src&&void 0!==d.dataset.imgSrc&&"IMG"===d.tagName?(d.src=d.dataset.imgSrc,d.removeAttribute("data-img-src")):d.classList.add(q))}break}0===k&&t&&(k=1,k=window.setInterval(function(a){var b;t&&(b=t.querySelector(w));b?(b.classList.add(u),b.classList.add(A)):(clearInterval(k),k=0)},v,k))}this.annotations={$Build:function(a){a&&(t=a);if(t){a=t.getElementsByClassName(e);for(var c=a.length,d=0;d<c;d++)b(a[d])}},$Render:p};
var k=0,e=d||"scroller",q=e+"-ready",u=e+"-visible",A=e+"-transition",w="."+e+"-ready:not(."+e+"-visible)",t,y=[],C=[],x=[],v=m||200,g=l||"5rem",n=h||700,r=f||1E3,z=a||30,H=!1;this.getName=function(){return e};this.setScrollerInterval=function(a){if("number"!==typeof a||500<a||100>a)throw a=Error(),a.message="The argument should be a number between 100 and 500 in milliseconds",a;v=a};this.setScrollerHeight=function(a){g=a};this.setErasable=function(a){H=a};WhUtils.defer(function(){var a=document.createTextNode("."+
e+" {opacity: 0;transform: translateY("+g+");}."+e+"."+e+"-visible {opacity: 1;transform: translateY(0rem);}."+e+"."+e+"-visible."+e+"-transition {transition: transform "+n+"ms cubic-bezier(0.0, 0.0, 0.2, 1), opacity "+r+"ms cubic-bezier(0.0, 0.0, 0.2, 1);}"),b=document.getElementsByTagName("STYLE")[0];b||(b=document.createElement("STYLE"),document.head.appendChild(b));b.insertBefore(a,b.firstChild)});window.addEventListener("resize",function(){WhUtils.buffer(p,500)});window.addEventListener("scroll",
function(){WhUtils.buffer(c,v)})};function TopNavigator(d){function m(){var c=window.pageYOffset-a;if(0===window.pageYOffset||200<Math.abs(c))l();else if(0>c){f.classList.remove(b);var d=window.pageYOffset-f.clientHeight-20,e=window.innerHeight+window.pageYOffset;if(f.offsetTop<d||f.offsetTop>=e)"absolute"===f.style.position&&(f.style.top=d+"px");else if(d=f.offsetTop-window.pageYOffset,0<=d||c<=d)f.style.top=0,f.style.position="fixed"}else"fixed"===f.style.position&&(f.style.position="absolute",f.style.top=window.pageYOffset+"px"),
c=window.pageYOffset-f.clientHeight-20,d=window.innerHeight+window.pageYOffset,"absolute"===f.style.position&&(f.offsetTop<c||f.offsetTop>=d)&&(f.style.top=0);a=window.pageYOffset}function l(){a=0;f.style.position="absolute";f.style.top=0;f.classList.add(b)}var h=d||"topNavigator",f;this.getName=function(){return h};this.annotations={$Init:l};var a=0,b=h+"-no-shadow";d=document.createTextNode("#"+h+"."+b+" {box-shadow : none; }");var p=document.getElementsByTagName("STYLE")[0];p||(p=document.createElement("STYLE"),
document.head.appendChild(p));p.insertBefore(d,p.firstChild);window.addEventListener("resize",m);window.addEventListener("scroll",m);window.addEventListener("load",m);window.addEventListener("popstate",l);WhUtils.defer(function(){if(!window[h])throw Error("An ID of '"+h+"' is not found.");if(window[h]instanceof HTMLCollection)throw Error("The Board of '"+h+"' is duplacated by ID.");f=window[h];f.dataset.beanName=h;document.body.appendChild(f)})};
